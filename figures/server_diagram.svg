<?xml version="1.0" encoding="UTF-8"?>
<svg width="850" height="700" viewBox="0 0 850 700" xmlns="http://www.w3.org/2000/svg" style="background-color: white;">
    <title>Full Lifecycle Client-Server-DB</title>
    
    <defs>
        <marker id="arrow-std" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#555"/>
        </marker>
        <style>
            .title { font-family: 'Segoe UI', sans-serif; font-size: 22px; font-weight: bold; fill: #333; }
            .phase-label { font-family: 'Segoe UI', sans-serif; font-size: 14px; font-weight: bold; fill: #777; text-transform: uppercase; letter-spacing: 1px; }
            .label { font-family: 'Segoe UI', sans-serif; font-size: 14px; fill: #333; }
            .label-bold { font-family: 'Segoe UI', sans-serif; font-size: 14px; font-weight: bold; fill: #222; }
            .sub-label { font-family: 'Segoe UI', sans-serif; font-size: 12px; fill: #666; }
            .lifeline { stroke: #999; stroke-width: 1; stroke-dasharray: 5,5; }
            .box { stroke-width: 2; rx: 5; ry: 5; fill: #fff; }
            .arrow-line { stroke: #555; stroke-width: 2; }
            .db-shape { stroke-width: 2; fill: #fff3cd; stroke: #ffc107; }
            .phase-bg { fill: #f8f9fa; }
            .phase-line { stroke: #eee; stroke-width: 2; }
        </style>
    </defs>

    <text x="425" y="30" text-anchor="middle" class="title">The Complete Request Lifecycle</text>

    <g transform="translate(50, 60)">
        <rect x="0" y="0" width="120" height="50" class="box" stroke="#007bff" fill="#e7f1ff"/>
        <text x="60" y="20" text-anchor="middle" class="label-bold" fill="#007bff">Client</text>
        <text x="60" y="40" text-anchor="middle" class="sub-label">(Browser)</text>
    </g>

    <g transform="translate(365, 60)">
        <rect x="0" y="0" width="120" height="50" class="box" stroke="#28a745" fill="#e8f5e9"/>
        <text x="60" y="20" text-anchor="middle" class="label-bold" fill="#28a745">Server</text>
        <text x="60" y="40" text-anchor="middle" class="sub-label">(Backend API)</text>
    </g>

    <g transform="translate(680, 50)">
        <path d="M0,10 A40,10 0 1,1 80,10 A40,10 0 1,1 0,10 M0,10 L0,60 A40,10 0 1,0 80,60 L80,10" class="db-shape"/>
        <text x="40" y="35" text-anchor="middle" class="label-bold" fill="#856404">Database</text>
    </g>

    <line x1="110" y1="110" x2="110" y2="650" class="lifeline"/>
    <line x1="425" y1="110" x2="425" y2="650" class="lifeline"/>
    <line x1="720" y1="110" x2="720" y2="650" class="lifeline"/>


    <rect x="20" y="130" width="810" height="80" class="phase-bg" opacity="0.5"/>
    <text x="40" y="175" class="phase-label" fill="#999" transform="rotate(-90, 40, 175)">Setup</text>
    
    <g transform="translate(0, 160)">
        <line x1="110" y1="0" x2="415" y2="0" class="arrow-line" marker-end="url(#arrow-std)" stroke-dasharray="5,2"/>
        <text x="260" y="-10" text-anchor="middle" class="label-bold">1. Open Connection</text>
        <text x="260" y="15" text-anchor="middle" class="sub-label">"Let's talk"</text>
    </g>


    <g transform="translate(0, 230)">
        <line x1="110" y1="0" x2="415" y2="0" class="arrow-line" marker-end="url(#arrow-std)"/>
        <text x="260" y="-10" text-anchor="middle" class="label-bold">2. Send Request</text>
        <text x="260" y="15" text-anchor="middle" class="sub-label">"GET /user/123"</text>

        <g transform="translate(0, 80)">
            <line x1="425" y1="0" x2="710" y2="0" class="arrow-line" marker-end="url(#arrow-std)"/>
            <text x="570" y="-10" text-anchor="middle" class="label-bold">3. Query Data</text>
        </g>

        <g transform="translate(0, 140)">
            <line x1="710" y1="0" x2="425" y2="0" class="arrow-line" marker-end="url(#arrow-std)" stroke-dasharray="4,2"/>
            <text x="570" y="-10" text-anchor="middle" class="label-bold">4. Return Data</text>
        </g>

        <g transform="translate(0, 220)">
            <line x1="415" y1="0" x2="110" y2="0" class="arrow-line" marker-end="url(#arrow-std)"/>
            <text x="260" y="-10" text-anchor="middle" class="label-bold">5. Send Response</text>
            <text x="260" y="15" text-anchor="middle" class="sub-label">"200 OK (JSON)"</text>
        </g>
    </g>


    <rect x="20" y="530" width="810" height="80" class="phase-bg" opacity="0.5"/>
    <text x="40" y="575" class="phase-label" fill="#999" transform="rotate(-90, 40, 575)">End</text>
    
    <g transform="translate(0, 570)">
        <line x1="110" y1="0" x2="415" y2="0" class="arrow-line" marker-end="url(#arrow-std)" stroke-dasharray="5,2"/>
        <text x="260" y="-10" text-anchor="middle" class="label-bold">6. Close Connection</text>
        <text x="260" y="15" text-anchor="middle" class="sub-label">"Done / Timeout"</text>
    </g>

</svg>